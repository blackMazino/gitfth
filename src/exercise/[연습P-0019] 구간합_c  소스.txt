#include <cstdio>
#include <cstdlib>
#include <cmath>
using namespace std;
 
#define MAXN 300005
 
int T, N, Q, t, i, j, x,y,q, chk;
long long answer, temp;
int left, right;
long arr[MAXN], z[18];
 
 
 
long sum(int L, int R, int nodeNum, int nodeL, int nodeR){
    if(R < nodeL || nodeR < L){
        return 0;
    }
    if(L <= nodeL && nodeR <= R){
        return arr[nodeNum];
    }
 
    int mid = (nodeL + nodeR) / 2;
 
    return sum(L, R, nodeNum*2, nodeL, mid) + sum(L, R, nodeNum*2+1, mid+1, nodeR);
 
}
 
void update(int a, int val){
        a += chk-1;
        arr[a] = val;
        while(a > 1){
            a /= 2;
            arr[a] = arr[a*2] + arr[a*2+1];
        }
}
 
int main()
{
    //freopen("test_input.txt", "r", stdin);
    setbuf(stdout, NULL);
     
    for(i=1; i<=18; i++){
        if (i==1) z[i] = 1;
        else z[i] = 2 * z[i-1];
    }
 
 
    scanf("%d", &T);
    for (t=1; t<=T; t++){
        scanf("%d %d", &N, &Q);
 
     
        chk = 0, j=1;
        while(chk < N){//시작 번호 찾기
            chk = z[j];
            j++;
        }
 
        for(i=chk; i<=chk+N-1; i++){
            arr[i] = i-chk +1;
        }
 
        for(i=chk-1; i>0; i--){
            arr[i] = arr[2*i] + arr[2*i+1];
        }
 
 
        for(i=1; i<=Q; i++){
 
 
            scanf("%d %d %d", &q, &x, &y);
            if(q==1) {//1일때는 sum
                temp = 0;
                temp = sum(x, y, 1, 1, chk);
                 
                //결과물 누적 저장
                answer = (answer+temp)%1000000007;
 
            }else{ //0일때는 값 업데이트
 
                update (x, y);
 
            }
 
 
        }
 
        if(answer <0)
            answer *= -1;
 
        printf("#%d %lld\n",t, answer);
        answer = 0;
    }
}
